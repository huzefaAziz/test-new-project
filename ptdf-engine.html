<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>PTDF Engine ‚Äî Probabilistic Temporal Drift Field</title>
<style>
:root{
  --bg:#04060f;--surface:#080d1e;--card:#0c1228;--border:#1a2545;
  --a1:#00e5ff;--a2:#ff6b35;--a3:#b44fff;--a4:#00ff9f;
  --text:#c8d8f0;--muted:#5a6a8a;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Segoe UI',system-ui,sans-serif;min-height:100vh;overflow-x:hidden}
#starfield{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
.star{position:absolute;border-radius:50%;background:#fff;animation:twinkle var(--d,3s) ease-in-out infinite alternate;opacity:var(--o,.4)}
@keyframes twinkle{to{opacity:.05;transform:scale(.5)}}
.page{position:relative;z-index:1}
.hero{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:60px 24px;text-align:center;background:radial-gradient(ellipse 80% 60% at 50% 0%,#001a3a88 0%,transparent 70%)}
.hero-tag{font-size:11px;letter-spacing:4px;text-transform:uppercase;color:var(--a1);border:1px solid var(--a1);padding:4px 16px;border-radius:100px;margin-bottom:28px;display:inline-block;animation:pulseTag 3s ease-in-out infinite}
@keyframes pulseTag{0%,100%{box-shadow:0 0 10px #00e5ff44}50%{box-shadow:0 0 28px #00e5ffaa}}
.hero h1{font-size:clamp(2.4rem,7vw,5.5rem);font-weight:900;line-height:1.05;background:linear-gradient(135deg,var(--a1) 0%,var(--a3) 55%,var(--a2) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:12px;letter-spacing:-1px}
.hero-sub{font-size:clamp(1rem,2.5vw,1.4rem);color:var(--muted);max-width:680px;line-height:1.6;margin-bottom:40px}
.hero-sub span{color:var(--text)}
#fieldCanvas{border-radius:20px;border:1px solid var(--border);box-shadow:0 0 60px #00e5ff18,0 0 120px #b44fff0a;width:min(700px,90vw);height:min(380px,50vw);display:block;margin:0 auto 20px;cursor:crosshair;background:var(--surface)}
.hero-badges{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-bottom:32px}
.badge{font-size:12px;letter-spacing:1px;padding:6px 18px;border-radius:100px;font-weight:600;border:1px solid}
.badge-c{color:var(--a1);border-color:var(--a1);background:#00e5ff0f}
.badge-b{color:var(--a3);border-color:var(--a3);background:#b44fff0f}
.badge-a{color:var(--a4);border-color:var(--a4);background:#00ff9f0f}
.section{padding:80px 24px;max-width:1100px;margin:0 auto}
.section-label{font-size:11px;letter-spacing:4px;text-transform:uppercase;color:var(--a2);margin-bottom:12px}
.section-title{font-size:clamp(1.8rem,4vw,3rem);font-weight:800;line-height:1.15;margin-bottom:24px;background:linear-gradient(90deg,#fff 30%,var(--muted) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.section-body{font-size:1.05rem;line-height:1.8;color:var(--text);max-width:700px}
.concepts-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-top:40px}
.concept-card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:28px 24px;position:relative;overflow:hidden;transition:transform .3s,border-color .3s,box-shadow .3s}
.concept-card:hover{transform:translateY(-4px);border-color:var(--c,var(--a1));box-shadow:0 0 30px color-mix(in srgb,var(--c,var(--a1)) 30%,transparent)}
.concept-card::before{content:'';position:absolute;inset:0;background:radial-gradient(circle at 80% 20%,color-mix(in srgb,var(--c,#00e5ff) 8%,transparent),transparent 60%);pointer-events:none}
.concept-icon{font-size:2rem;margin-bottom:16px;display:block;filter:drop-shadow(0 0 8px var(--c,#00e5ff))}
.concept-card h3{font-size:1.05rem;font-weight:700;color:var(--c,var(--a1));margin-bottom:10px}
.concept-card p{font-size:.9rem;color:var(--muted);line-height:1.6}
.pipeline{display:flex;flex-direction:column;gap:0;margin-top:40px}
.pipe-step{display:grid;grid-template-columns:60px 1fr;gap:20px;position:relative}
.pipe-step:not(:last-child)::after{content:'';position:absolute;left:29px;top:60px;width:2px;height:calc(100% - 20px);background:linear-gradient(to bottom,var(--a1),var(--a3))}
.pipe-num{width:58px;height:58px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.1rem;font-weight:900;border:2px solid;flex-shrink:0;position:relative;z-index:1}
.pipe-content{padding:4px 0 40px}
.pipe-content h4{font-size:1.1rem;font-weight:700;margin-bottom:8px}
.pipe-content p{font-size:.92rem;color:var(--muted);line-height:1.7}
.demo-wrap{background:var(--card);border:1px solid var(--border);border-radius:20px;padding:32px;margin-top:40px}
.demo-row{display:flex;flex-wrap:wrap;gap:16px;margin-bottom:20px;align-items:center}
.demo-input{flex:1;min-width:200px;background:var(--surface);border:1px solid var(--border);color:var(--text);padding:12px 18px;border-radius:10px;font-size:.95rem;outline:none;transition:border-color .25s,box-shadow .25s}
.demo-input:focus{border-color:var(--a1);box-shadow:0 0 0 3px #00e5ff18}
.btn{padding:12px 28px;border-radius:10px;border:none;cursor:pointer;font-weight:700;font-size:.95rem;transition:all .25s;white-space:nowrap}
.btn-primary{background:linear-gradient(135deg,var(--a1),var(--a3));color:#fff;box-shadow:0 4px 20px #00e5ff33}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 32px #00e5ff55}
.btn-secondary{background:transparent;color:var(--a2);border:1px solid var(--a2)}
.btn-secondary:hover{background:#ff6b3515}
.sliders{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-bottom:16px}
.slider-wrap label{font-size:11px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:6px;display:flex;justify-content:space-between}
.slider-wrap label span{color:var(--a1)}
input[type=range]{-webkit-appearance:none;width:100%;height:4px;background:var(--border);border-radius:4px;outline:none}
input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:var(--a1);cursor:pointer;box-shadow:0 0 8px var(--a1)}
.output-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px;margin-top:20px}
.output-cell{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:14px;transition:all .4s}
.output-cell.active{border-color:var(--a1);box-shadow:0 0 16px #00e5ff33}
.oc-label{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:6px}
.oc-val{font-size:1.3rem;font-weight:800;background:linear-gradient(90deg,var(--a1),var(--a4));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.oc-bar{height:3px;background:var(--border);border-radius:3px;margin-top:8px;overflow:hidden}
.oc-fill{height:100%;background:linear-gradient(90deg,var(--a1),var(--a4));border-radius:3px;transition:width .6s cubic-bezier(.23,1,.32,1)}
.log-area{background:#020509;border:1px solid var(--border);border-radius:10px;padding:16px;margin-top:16px;font-family:'Courier New',monospace;font-size:12px;line-height:1.8;max-height:160px;overflow-y:auto;color:#4a8a6a}
.log-line{animation:fadeIn .3s ease}
@keyframes fadeIn{from{opacity:0;transform:translateX(-10px)}}
.log-line.info{color:var(--a1)}.log-line.warn{color:var(--a2)}.log-line.ok{color:var(--a4)}.log-line.field{color:var(--a3)}
.math-panel{background:var(--card);border:1px solid var(--border);border-radius:20px;padding:32px;margin-top:40px;overflow-x:auto}
.math-panel h3{font-size:1rem;color:var(--a3);margin-bottom:20px;letter-spacing:2px}
.eq{font-family:'Courier New',monospace;font-size:.9rem;line-height:2.4;color:var(--text);display:flex;flex-direction:column;gap:4px}
.eq-row{display:flex;gap:10px;align-items:baseline;flex-wrap:wrap}
.eq-name{color:var(--a1);min-width:80px;font-weight:700}
.eq-body{color:#9db8d8}
.eq-comment{color:var(--muted);font-size:.78rem}
.compare-table{width:100%;border-collapse:collapse;margin-top:32px;font-size:.88rem}
.compare-table th{background:var(--card);color:var(--muted);padding:14px 16px;text-align:left;font-size:11px;letter-spacing:2px;text-transform:uppercase;border-bottom:1px solid var(--border)}
.compare-table td{padding:13px 16px;border-bottom:1px solid #0d1628;color:var(--text);vertical-align:top;line-height:1.6}
.compare-table tr:hover td{background:#0d1628}
.ptdf{color:var(--a1)!important;font-weight:700}
.yes-c{color:var(--a4)}
.no-c{color:var(--muted)}
footer{border-top:1px solid var(--border);text-align:center;padding:40px 24px;color:var(--muted);font-size:.85rem}
footer span{color:var(--a1)}
@media(max-width:600px){.pipe-step{grid-template-columns:44px 1fr}.pipe-step:not(:last-child)::after{left:21px}.pipe-num{width:42px;height:42px;font-size:.9rem}}
</style>
</head>
<body>
<div id="starfield"></div>
<div class="page">

<!-- HERO -->
<section class="hero">
  <div class="hero-tag">‚¨° Original AI Architecture Concept ¬∑ 2025</div>
  <h1>Probabilistic<br>Temporal Drift Fields</h1>
  <p class="hero-sub">
    A fundamentally new computational intelligence model ‚Äî no neurons, no weights, no gradients.<br>
    <span>PTDF</span> reasons through <span>field curvature</span>, <span>causal drift vectors</span>, and <span>entropic resonance</span>.
  </p>
  <div class="hero-badges">
    <span class="badge badge-c">Zero Gradient Descent</span>
    <span class="badge badge-b">Topology-Based Memory</span>
    <span class="badge badge-a">Causal Entropy Engine</span>
  </div>
  <canvas id="fieldCanvas" title="Click to inject causality seeds"></canvas>
  <p style="font-size:11px;color:var(--muted);letter-spacing:2px;margin-top:4px">CLICK CANVAS TO INJECT CAUSALITY SEEDS ¬∑ LIVE FIELD SIMULATION</p>
</section>

<!-- CONCEPT -->
<section class="section">
  <div class="section-label">Core Concept</div>
  <h2 class="section-title">What is a Temporal Drift Field?</h2>
  <p class="section-body">
    Instead of layers and activations, a PTDF engine maintains a high-dimensional
    <strong style="color:var(--a1)">continuous probability manifold</strong> that evolves over time.
    Inputs are not "processed" ‚Äî they are <em>disturbances</em> injected into the field, propagating as drift waves.
    The field's curvature at any point encodes learned knowledge.
    Answers emerge not from forward-passes but from the field reaching a
    <strong style="color:var(--a3)">causal equilibrium state</strong>.
  </p>
  <div class="concepts-grid">
    <div class="concept-card" style="--c:#00e5ff">
      <span class="concept-icon">„Ä∞Ô∏è</span>
      <h3>Drift Manifold</h3>
      <p>A living n-dimensional surface. Each location holds a probability amplitude. Events warp the manifold like mass warps spacetime.</p>
    </div>
    <div class="concept-card" style="--c:#ff6b35">
      <span class="concept-icon">üï≥Ô∏è</span>
      <h3>Causality Sinks</h3>
      <p>Regions of the field that attract drift. They form organically from repeated patterns ‚Äî the field's equivalent of long-term memory.</p>
    </div>
    <div class="concept-card" style="--c:#b44fff">
      <span class="concept-icon">üåä</span>
      <h3>Entropic Resonance</h3>
      <p>Two distant field regions resonate when their entropy gradients align ‚Äî enabling non-local reasoning without message-passing.</p>
    </div>
    <div class="concept-card" style="--c:#00ff9f">
      <span class="concept-icon">‚è≥</span>
      <h3>Temporal Drift Memory</h3>
      <p>Memory is not stored ‚Äî it is encoded as persistent curvature. Forgetting is natural field relaxation, not explicit erasure.</p>
    </div>
    <div class="concept-card" style="--c:#ffde59">
      <span class="concept-icon">üîÄ</span>
      <h3>Phase-Branch Sampling</h3>
      <p>Uncertainty is resolved by sampling multiple branches of field phase simultaneously, then collapsing to highest coherence.</p>
    </div>
    <div class="concept-card" style="--c:#ff4d8d">
      <span class="concept-icon">üìê</span>
      <h3>Topological Invariants</h3>
      <p>Core concepts are preserved as topological holes in the manifold ‚Äî they cannot be destroyed by local perturbations.</p>
    </div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="section" style="border-top:1px solid var(--border)">
  <div class="section-label">Architecture</div>
  <h2 class="section-title">How PTDF Processes Information</h2>
  <div class="pipeline">
    <div class="pipe-step">
      <div class="pipe-num" style="color:var(--a1);border-color:var(--a1);background:#00e5ff10">1</div>
      <div class="pipe-content">
        <h4 style="color:var(--a1)">Seed Injection</h4>
        <p>Input data is encoded as disturbance coordinates on the field manifold. Each token, value, or event becomes a localized energy packet ‚Äî not a vector.</p>
      </div>
    </div>
    <div class="pipe-step">
      <div class="pipe-num" style="color:var(--a3);border-color:var(--a3);background:#b44fff10">2</div>
      <div class="pipe-content">
        <h4 style="color:var(--a3)">Drift Propagation</h4>
        <p>The disturbance propagates as a wave across the manifold. Curvature from past learning guides the drift ‚Äî high-curvature zones attract waves. No matrix multiplication occurs.</p>
      </div>
    </div>
    <div class="pipe-step">
      <div class="pipe-num" style="color:var(--a2);border-color:var(--a2);background:#ff6b3510">3</div>
      <div class="pipe-content">
        <h4 style="color:var(--a2)">Causal Basin Formation</h4>
        <p>As waves intersect, constructive interference creates "causal basins" ‚Äî attractor regions that represent candidate answers, weighted by field energy.</p>
      </div>
    </div>
    <div class="pipe-step">
      <div class="pipe-num" style="color:var(--a4);border-color:var(--a4);background:#00ff9f10">4</div>
      <div class="pipe-content">
        <h4 style="color:var(--a4)">Entropic Collapse</h4>
        <p>The system measures the entropy of each causal basin. When a basin's entropy drops below a threshold ‚Äî the field has "decided." The lowest-entropy basin is the output.</p>
      </div>
    </div>
    <div class="pipe-step">
      <div class="pipe-num" style="color:#ff4d8d;border-color:#ff4d8d;background:#ff4d8d10">5</div>
      <div class="pipe-content">
        <h4 style="color:#ff4d8d">Manifold Reshaping (Learning)</h4>
        <p>Post-collapse, the field retains a permanent but small deformation at the active zone. Learning is not weight updates ‚Äî it is topological sculpting of the manifold.</p>
      </div>
    </div>
  </div>

  <div class="math-panel">
    <h3>FIELD EQUATIONS (Conceptual Formalism)</h3>
    <div class="eq">
      <div class="eq-row"><span class="eq-name">Field:</span><span class="eq-body">Œ¶(x,t) = ‚à´ œÅ(s) ¬∑ K(x,s,t) ds</span><span class="eq-comment">// field amplitude at position x, time t</span></div>
      <div class="eq-row"><span class="eq-name">Drift:</span><span class="eq-body">‚àÇŒ¶/‚àÇt = ‚àíŒ±‚àá¬≤Œ¶ + Œ≤¬∑C(x) + Œ≥¬∑Œµ(x,t)</span><span class="eq-comment">// curvature C guides drift; Œµ = entropic noise</span></div>
      <div class="eq-row"><span class="eq-name">Memory:</span><span class="eq-body">C(x) += Œ¥ ¬∑ ‚ÄñŒ¶(x, t_collapse)‚Äñ¬≤ ¬∑ Œît</span><span class="eq-comment">// curvature grows permanently at collapse sites</span></div>
      <div class="eq-row"><span class="eq-name">Output:</span><span class="eq-body">y = argmin_B [ H(Œ¶|_B) ]  where B ‚àà BasinSet</span><span class="eq-comment">// lowest-entropy basin = answer</span></div>
      <div class="eq-row"><span class="eq-name">Forget:</span><span class="eq-body">C(x,t) ‚Üí C(x,t) ¬∑ e^(‚àíŒª¬∑t)</span><span class="eq-comment">// natural curvature decay = organic forgetting</span></div>
    </div>
  </div>
</section>

<!-- DEMO -->
<section class="section" style="border-top:1px solid var(--border)">
  <div class="section-label">Interactive Demo</div>
  <h2 class="section-title">PTDF Inference Simulation</h2>
  <div class="demo-wrap">
    <div class="demo-row">
      <input class="demo-input" id="queryInput" type="text" placeholder="Enter a concept to inject into the field‚Ä¶" value="recursive causal emergence"/>
      <button class="btn btn-primary" onclick="runInference()">‚ö° Inject &amp; Propagate</button>
      <button class="btn btn-secondary" onclick="resetField()">‚Ü∫ Reset Field</button>
    </div>
    <div class="sliders">
      <div class="slider-wrap"><label>Drift Velocity <span id="dvVal">0.72</span></label><input type="range" id="dv" min="0" max="1" step="0.01" value="0.72" oninput="document.getElementById('dvVal').textContent=this.value"></div>
      <div class="slider-wrap"><label>Entropic Noise <span id="enVal">0.31</span></label><input type="range" id="en" min="0" max="1" step="0.01" value="0.31" oninput="document.getElementById('enVal').textContent=this.value"></div>
      <div class="slider-wrap"><label>Curvature Depth <span id="cdVal">0.58</span></label><input type="range" id="cd" min="0" max="1" step="0.01" value="0.58" oninput="document.getElementById('cdVal').textContent=this.value"></div>
      <div class="slider-wrap"><label>Phase Branches <span id="pbVal">4</span></label><input type="range" id="pb" min="1" max="8" step="1" value="4" oninput="document.getElementById('pbVal').textContent=this.value"></div>
    </div>
    <div class="output-grid" id="outputGrid"></div>
    <div class="log-area" id="logArea"></div>
  </div>
</section>

<!-- COMPARISON -->
<section class="section" style="border-top:1px solid var(--border)">
  <div class="section-label">Comparison</div>
  <h2 class="section-title">PTDF vs. Existing AI Paradigms</h2>
  <div style="overflow-x:auto">
    <table class="compare-table">
      <thead>
        <tr><th>Dimension</th><th>Neural Networks</th><th>Symbolic AI</th><th>Bayesian Nets</th><th class="ptdf">PTDF Engine ‚¨°</th></tr>
      </thead>
      <tbody>
        <tr><td>Core Unit</td><td>Neuron / weight</td><td>Rule / predicate</td><td>Node / edge</td><td class="ptdf">Field amplitude Œ¶(x,t)</td></tr>
        <tr><td>Learning</td><td>Gradient descent</td><td>Rule induction</td><td>Bayes update</td><td class="ptdf">Manifold curvature sculpting</td></tr>
        <tr><td>Memory</td><td>Weight matrix</td><td>Knowledge base</td><td>CPT tables</td><td class="ptdf">Persistent field curvature</td></tr>
        <tr><td>Forgetting</td><td class="no-c">Explicit only</td><td class="no-c">Manual deletion</td><td class="no-c">Manual</td><td class="ptdf yes-c">Natural field relaxation</td></tr>
        <tr><td>Output mechanism</td><td>Softmax / argmax</td><td>Proof resolution</td><td>MAP inference</td><td class="ptdf">Entropic basin collapse</td></tr>
        <tr><td>Interpretability</td><td class="no-c">Low (black box)</td><td class="yes-c">High (explicit)</td><td>Medium</td><td class="ptdf">Field topology is inspectable</td></tr>
        <tr><td>Uncertainty</td><td>Calibration needed</td><td>Binary</td><td>Native</td><td class="ptdf yes-c">Native (amplitude = probability)</td></tr>
        <tr><td>Parallel reasoning</td><td class="no-c">Sequential layers</td><td class="no-c">Linear proof tree</td><td class="no-c">Sequential</td><td class="ptdf yes-c">All basins form simultaneously</td></tr>
        <tr><td>Causal structure</td><td class="no-c">Implicit at best</td><td class="yes-c">Explicit rules</td><td>Graph edges</td><td class="ptdf">Encoded in field topology</td></tr>
      </tbody>
    </table>
  </div>
</section>

<footer>
  <div style="font-size:1.4rem;font-weight:900;letter-spacing:-1px;margin-bottom:8px"><span>PTDF</span> Engine</div>
  <p>Probabilistic Temporal Drift Field ‚Äî An original AI architecture concept.</p>
  <p style="margin-top:8px">No neurons. No weights. No gradient descent. Pure field dynamics.</p>
</footer>

</div>

<script>
// ‚îÄ‚îÄ STARFIELD ‚îÄ‚îÄ
(()=>{
  const sf=document.getElementById('starfield');
  for(let i=0;i<180;i++){
    const s=document.createElement('div');s.className='star';
    const sz=(Math.random()*2+.5).toFixed(1);
    s.style.cssText=`width:${sz}px;height:${sz}px;left:${(Math.random()*100).toFixed(2)}%;top:${(Math.random()*100).toFixed(2)}%;--d:${(2+Math.random()*5).toFixed(1)}s;--o:${(.15+Math.random()*.7).toFixed(2)};animation-delay:${(Math.random()*6).toFixed(1)}s`;
    sf.appendChild(s);
  }
})();

// ‚îÄ‚îÄ CANVAS FIELD ‚îÄ‚îÄ
const canvas=document.getElementById('fieldCanvas');
const ctx=canvas.getContext('2d');
let W,H,particles=[],sinks=[],time=0;
const COLS=['#00e5ff','#b44fff','#ff6b35','#00ff9f','#ff4d8d','#ffde59'];

function resize(){
  W=canvas.width=canvas.clientWidth;
  H=canvas.height=canvas.clientHeight;
  initField();
}

function hexToRgb(hex){
  const h=hex.replace('#','');
  const n=parseInt(h,16);
  return [(n>>16)&255,(n>>8)&255,n&255];
}

class Particle{
  constructor(x,y,color){
    this.x=x;this.y=y;this.vx=(Math.random()-.5)*2;this.vy=(Math.random()-.5)*2;
    this.color=color||COLS[Math.floor(Math.random()*COLS.length)];
    this.life=1;this.decay=.004+Math.random()*.004;
    this.radius=2+Math.random()*3;this.phase=Math.random()*Math.PI*2;this.freq=.02+Math.random()*.04;
  }
  update(){
    for(const sk of sinks){
      const dx=sk.x-this.x,dy=sk.y-this.y,d=Math.sqrt(dx*dx+dy*dy)+1;
      const f=sk.str/(d*d);this.vx+=dx*f;this.vy+=dy*f;
    }
    this.vx+=(Math.random()-.5)*.3;this.vy+=(Math.random()-.5)*.3;
    this.vx*=.97;this.vy*=.97;this.x+=this.vx;this.y+=this.vy;
    this.life-=this.decay;this.phase+=this.freq;
  }
  draw(){
    const [r,g2,b]=hexToRgb(this.color);
    const a=Math.max(0,Math.min(1,this.life));
    const grad=ctx.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius*4);
    grad.addColorStop(0,`rgba(${r},${g2},${b},${a.toFixed(3)})`);
    grad.addColorStop(1,`rgba(${r},${g2},${b},0)`);
    ctx.beginPath();ctx.arc(this.x,this.y,this.radius*(.8+Math.sin(this.phase)*.2),0,Math.PI*2);
    ctx.fillStyle=grad;ctx.fill();
  }
}

class Sink{constructor(x,y){this.x=x;this.y=y;this.str=.08;this.age=0;this.max=300;}}

function initField(){
  particles=[];sinks=[];
  for(let i=0;i<60;i++) particles.push(new Particle(Math.random()*W,Math.random()*H));
  for(let i=0;i<3;i++) sinks.push(new Sink(W*.25+Math.random()*W*.5,H*.25+Math.random()*H*.5));
}

function inject(x,y,color,n=30){
  for(let i=0;i<n;i++){
    const p=new Particle(x+(Math.random()-.5)*20,y+(Math.random()-.5)*20,color);
    p.vx=(Math.random()-.5)*5;p.vy=(Math.random()-.5)*5;particles.push(p);
  }
  sinks.push(new Sink(x,y));
}

canvas.addEventListener('click',e=>{
  const r=canvas.getBoundingClientRect();
  inject(e.clientX-r.left,e.clientY-r.top,COLS[Math.floor(Math.random()*COLS.length)],45);
});

function loop(){
  ctx.fillStyle='rgba(8,13,30,.18)';ctx.fillRect(0,0,W,H);
  // draw sinks
  for(const sk of sinks){
    const r2=30*(1-sk.age/sk.max)+10;
    const al=Math.min(1,(sk.max-sk.age)/100);
    const g=ctx.createRadialGradient(sk.x,sk.y,0,sk.x,sk.y,r2*2);
    g.addColorStop(0,`rgba(0,229,255,${(.08*al).toFixed(3)})`);g.addColorStop(1,'rgba(0,229,255,0)');
    ctx.beginPath();ctx.arc(sk.x,sk.y,r2*2,0,Math.PI*2);ctx.fillStyle=g;ctx.fill();
    sk.age++;
  }
  sinks=sinks.filter(s=>s.age<s.max);
  // connections
  for(let i=0;i<particles.length;i+=3){
    for(let j=i+1;j<particles.length;j+=3){
      const p=particles[i],q=particles[j];
      const d=Math.hypot(p.x-q.x,p.y-q.y);
      if(d<80){
        ctx.beginPath();ctx.moveTo(p.x,p.y);ctx.lineTo(q.x,q.y);
        ctx.strokeStyle=`rgba(0,229,255,${(1-d/80)*.06*p.life*q.life})`;
        ctx.lineWidth=.5;ctx.stroke();
      }
    }
  }
  if(Math.random()<.15&&particles.length<400) particles.push(new Particle(Math.random()*W,Math.random()*H));
  for(const p of particles){p.update();p.draw();}
  particles=particles.filter(p=>p.life>0&&p.x>-50&&p.x<W+50&&p.y>-50&&p.y<H+50);
  time++;requestAnimationFrame(loop);
}
window.addEventListener('resize',resize);resize();loop();

// ‚îÄ‚îÄ DEMO ENGINE ‚îÄ‚îÄ
const FIELDS=[
  {id:'manifold',label:'MANIFOLD Œ¶'},
  {id:'curvature',label:'CURVATURE ‚àá¬≤'},
  {id:'entropy',label:'ENTROPY H'},
  {id:'drift',label:'DRIFT SPEED'},
  {id:'basins',label:'BASINS'},
  {id:'coherence',label:'COHERENCE'},
  {id:'resonance',label:'RESONANCE'},
  {id:'collapse',label:'COLLAPSE œÑ'},
];

function buildGrid(){
  document.getElementById('outputGrid').innerHTML=FIELDS.map(f=>`
    <div class="output-cell" id="cell-${f.id}">
      <div class="oc-label">${f.label}</div>
      <div class="oc-val" id="val-${f.id}">‚Äî</div>
      <div class="oc-bar"><div class="oc-fill" id="bar-${f.id}" style="width:0%"></div></div>
    </div>`).join('');
}
buildGrid();

const LOG=document.getElementById('logArea');
function log(msg,cls=''){
  const d=document.createElement('div');d.className='log-line '+(cls||'');
  d.textContent='['+new Date().toLocaleTimeString()+'] '+msg;
  LOG.appendChild(d);LOG.scrollTop=LOG.scrollHeight;
  if(LOG.children.length>30) LOG.removeChild(LOG.firstChild);
}

function setCell(id,val,pct,active){
  const v=document.getElementById('val-'+id);
  const b=document.getElementById('bar-'+id);
  const c=document.getElementById('cell-'+id);
  if(v) v.textContent=val;
  if(b) b.style.width=Math.round(pct)+'%';
  if(c) c.classList.toggle('active',!!active);
}

function sleep(ms){return new Promise(r=>setTimeout(r,ms));}

async function runInference(){
  const q=document.getElementById('queryInput').value.trim();if(!q)return;
  const dv=+document.getElementById('dv').value;
  const en=+document.getElementById('en').value;
  const cd=+document.getElementById('cd').value;
  const pb=+document.getElementById('pb').value;
  inject(W*.35+Math.random()*W*.3,H*.3+Math.random()*H*.4,COLS[Math.floor(Math.random()*COLS.length)],55);
  log('Seed injection: "'+q+'"','info');setCell('manifold','...',0);
  await sleep(200);const mv=(0.5+Math.random()*.45).toFixed(3);
  setCell('manifold','Œ¶='+mv,mv*100,true);log('Manifold disturbance amplitude: '+mv,'field');
  await sleep(250);const cv=(cd*(.7+Math.random()*.3)).toFixed(3);
  setCell('curvature','‚àá¬≤='+cv,cv*100,true);log('Curvature response: '+cv,'field');
  await sleep(220);const ev=(en*(.5+Math.random()*.5)).toFixed(3);
  setCell('entropy','H='+ev,ev*100,false);log('Initial entropy: '+ev+' ‚Äî propagating drift...','warn');
  await sleep(150);const drv=(dv*(.8+Math.random()*.4)).toFixed(3);
  setCell('drift','v='+drv,drv*100,true);log('Drift velocity: '+drv+' field-units/tick','info');
  for(let i=0;i<pb;i++){await sleep(90+Math.random()*80);log('Phase-branch '+'ŒëŒíŒìŒîŒïŒñŒóŒò'[i]+' forming...','field');}
  const nbas=Math.floor(2+Math.random()*pb);
  setCell('basins',nbas+' formed',(nbas/pb)*100,true);log(nbas+' causal basins detected','ok');
  await sleep(300);const coh=(0.4+Math.random()*.55).toFixed(3);
  setCell('coherence',coh,coh*100,true);log('Coherence score: '+coh,'ok');
  await sleep(200);const res=(0.3+Math.random()*.65).toFixed(3);
  setCell('resonance',res,res*100,false);log('Entropic resonance ('+Math.floor(2+Math.random()*3)+' regions): '+res,'field');
  await sleep(400);const ct=(15+Math.random()*40).toFixed(1);
  setCell('collapse',ct+'ms',Math.min(100,ct/50*100),true);
  log('‚úì Collapsed ‚Üí basin B-'+Math.floor(1+Math.random()*nbas)+' at œÑ='+ct+'ms','ok');
  log('Curvature imprint written. Manifold reshaped.','info');
}

function resetField(){initField();buildGrid();LOG.innerHTML='';log('Field reset ‚Äî manifold at ground state','info');}
</script>
</body>
</html>
